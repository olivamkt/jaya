---
import { Image } from 'astro:assets'
import servicesImg from '@/assets/home/services.png'
import { withBase } from '@/utils/url'
import { getTranslations, t } from '@/i18n/translations'
import { getLocale, getLocalizedPath } from '@/i18n/utils'

const locale = getLocale(Astro)
const translations = await getTranslations(locale)
---

<style>
	@reference '@/styles/global.css';

	.services-section {
		@apply min-h-[735px];
		@apply bg-teal;

		.service-title {
			@apply font-space-grotesk uppercase;
		}

		.services-image {
			@apply absolute hidden lg:block;
			@apply top-[-50px] left-[-20px];
			@apply w-[318px];
			opacity: 0;
			transform: translateX(-100px);
			transition:
				opacity 0.8s ease-out,
				transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);

			&.visible {
				opacity: 1;
				transform: translateX(0);
			}
		}

		.services-list {
			@apply flex flex-col flex-wrap items-center md:flex-row md:items-start;
			@apply lg:max-w-[784px];
			@apply mx-auto mt-20 lg:mt-40;
			@apply gap-8;
		}

		.service-item {
			@apply w-[240px];
			@apply px-8 py-6;
			@apply bg-primary-light;
			@apply text-base leading-[0.99] text-white;
			@apply rounded-bl-[50px];
		}

		.service-item-title {
			@apply mb-4;
			@apply text-base;
		}

		.service-item-text {
			@apply text-sm;
		}

		.btn-read-more {
			@apply btn btn-outline btn-wide;
			@apply flex;
			@apply max-w-[420px];
			@apply mx-auto mt-10;
			@apply text-primary-light text-center;
			@apply border-primary-light rounded-full;
		}
	}
</style>

<section id="services" class="services-section px-10 py-20 lg:px-0">
	<div class="container">
		<div class="flex lg:gap-10">
			<div class="relative text-white lg:w-1/4">
				<Image src={servicesImg} alt="Services" class="services-image" id="services-image" />
			</div>
			<div class="text-white lg:w-3/4 lg:max-w-[726px]">
				<h2 class="service-title">{t(translations, 'home.services.title')}</h2>
				<h3 class="my-8 text-3xl font-bold">
					{t(translations, 'home.services.subtitle')}
				</h3>
				<p>
					<Fragment set:html={t(translations, 'home.services.description')} />
				</p>
			</div>
		</div>
		<div class="services-list">
			<div class="service-item">
				<h3 class="service-item-title"><Fragment set:html={t(translations, 'home.services.service1.title')} /></h3>
				<p class="service-item-text">
					<Fragment set:html={t(translations, 'home.services.service1.text')} />
				</p>
			</div>

			<div class="service-item">
				<h3 class="service-item-title"><Fragment set:html={t(translations, 'home.services.service2.title')} /></h3>
				<p class="service-item-text">
					<Fragment set:html={t(translations, 'home.services.service2.text')} />
				</p>
			</div>

			<div class="service-item">
				<h3 class="service-item-title"><Fragment set:html={t(translations, 'home.services.service3.title')} /></h3>
				<p class="service-item-text">
					<Fragment set:html={t(translations, 'home.services.service3.text')} />
				</p>
			</div>
		</div>
		<a href={withBase(getLocalizedPath('contact', locale))} class="btn-read-more">
			{t(translations, 'common.letsTalk')}
		</a>
	</div>
</section>

<script>
	import { animateOnSectionVisible } from '@/utils/animations'

	document.addEventListener('astro:page-load', () => {
		animateOnSectionVisible('#services', 'services-image')
	})
</script>
