---
import { Image } from 'astro:assets'
import impactImg from '@/assets/home/impact.png'
import fintechImg from '@/assets/home/fintech.png'
import healthtechImg from '@/assets/home/healthtech.png'
import retailImg from '@/assets/home/retail.png'
import saasImg from '@/assets/home/saas.png'
import { withBase } from '@/utils/url'
import { getTranslations, t } from '@/i18n/translations'
import { getLocale, getLocalizedPath } from '@/i18n/utils'

const locale = getLocale(Astro)
const translations = await getTranslations(locale)
---

<style>
	@reference '@/styles/global.css';

	.impact-section {
		@apply min-h-[735px];

		.impact-title {
			@apply mt-2 mb-10;
			@apply text-primary text-3xl tracking-[-0.5px];
		}

		.impact-subtitle {
			@apply font-space-grotesk text-primary uppercase;
		}

		.solutions-list {
			@apply flex flex-row flex-wrap items-center justify-center;
			@apply mt-10;
			@apply gap-10 lg:gap-20;
		}

		.solution-item {
			@apply w-[147px];
		}

		.solution-container {
			@apply flex items-center justify-center;
			@apply h-[147px];
			@apply bg-primary;
			@apply text-white;
			@apply rounded-tl-[50px];
			@apply transition-all duration-500;

			&:hover {
				@apply bg-primary-light;
				@apply rounded-tl-[0px];
				@apply rounded-br-[50px];

				img {
					filter: brightness(0);
				}
			}

			img {
				@apply h-[65px] w-[65px];
				@apply transition-all duration-500;
			}
		}

		.solution-item-title {
			@apply mb-4;
			@apply text-base font-bold;
		}

		.solution-item-text {
			@apply mt-5;
			@apply text-primary-light text-center text-sm font-bold;
		}

		.impact-description-bold {
			@apply text-primary;
			@apply text-lg;
			@apply font-bold;
			@apply my-5;
		}

		.btn-see-more {
			@apply btn btn-outline btn-wide btn-primary;
			@apply flex;
			@apply text-center;
			@apply max-w-[420px];
			@apply rounded-full;
			@apply mx-auto;
			@apply mt-10;
		}

		.impact-image {
			opacity: 0;
			transform: translateX(100px);
			transition:
				opacity 0.8s ease-out,
				transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);

			&.visible {
				opacity: 1;
				transform: translateX(0);
			}
		}
	}
</style>

<section class="impact-section px-10 py-20">
	<div class="container">
		<div class="flex flex-row gap-10">
			<div class="text-white lg:w-2/3 lg:max-w-[690px]">
				<h1 class="impact-subtitle">{t(translations, 'home.impact.subtitle')}</h1>
				<h2 class="impact-title"><Fragment set:html={t(translations, 'home.impact.title')} /></h2>
				<p class="text-primary">
					{t(translations, 'home.impact.description1')}
				</p>
				<p class="impact-description-bold">
					{t(translations, 'home.impact.description2')}
				</p>
				<p class="text-primary">
					{t(translations, 'home.impact.description3')}
				</p>
			</div>
			<div class="hidden text-white lg:block lg:w-1/3">
				<Image
					src={impactImg}
					alt="Impact Image"
					class="impact-image w-[430px]"
					id="impact-image"
				/>
			</div>
		</div>
		<div class="solutions-list">
			<a href={withBase(getLocalizedPath('fintech', locale))} class="solution-item">
				<div class="solution-container">
					<Image src={fintechImg} alt="Fintech Image" class="w-[430px]" />
				</div>
				<div class="solution-item-text">{t(translations, 'nav.fintech')}</div>
			</a>
			<a href={withBase(getLocalizedPath('healthtech', locale))} class="solution-item">
				<div class="solution-container">
					<Image src={healthtechImg} alt="Healthtech Image" class="w-[430px]" />
				</div>
				<div class="solution-item-text">{t(translations, 'nav.healthtech')}</div>
			</a>
			<a href={withBase(getLocalizedPath('retail', locale))} class="solution-item">
				<div class="solution-container">
					<Image src={retailImg} alt="Retail Image" class="w-[430px]" />
				</div>
				<div class="solution-item-text">{t(translations, 'nav.retail')}</div>
			</a>
			<a href={withBase(getLocalizedPath('saas', locale))} class="solution-item">
				<div class="solution-container">
					<Image src={saasImg} alt="SaaS Image" class="w-[430px]" />
				</div>
				<div class="solution-item-text">{t(translations, 'nav.saas')}</div>
			</a>
		</div>
		<a href={withBase(getLocalizedPath('fintech', locale))} class="btn-see-more">
			{t(translations, 'home.impact.cta')}
		</a>
	</div>
</section>

<script>
	import { animateOnSectionVisible } from '@/utils/animations'

	document.addEventListener('astro:page-load', () => {
		animateOnSectionVisible('.impact-section', 'impact-image')
	})
</script>
